<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Mybatiså­¦ä¹ ç¬”è®°(ä¸€)]]></title>
    <url>%2F2018%2F12%2F05%2Fmybatis%2Fmybatis1%2F</url>
    <content type="text"><![CDATA[MyBatis æœ¬æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatis, 2010å¹´è¿™ä¸ªé¡¹ç›®ç”±apache software foundation è¿ç§»åˆ°äº†google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatis ã€‚2013å¹´11æœˆè¿ç§»åˆ°Githubã€‚æ˜¯ä¸€ä¸ªåŸºäºŽJavaçš„æŒä¹…å±‚æ¡†æž¶ã€‚ ä¸€ã€ç†è§£Mybatis? MyBatis æ˜¯æ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„çš„ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æž¶ã€‚ MyBatis é¿å…äº†å‡ ä¹Žæ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹å·¥è®¾ç½®å‚æ•°ä»¥åŠæŠ½å–ç»“æžœé›†ã€‚ MyBatis ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸºæœ¬ä½“ï¼Œå°†æŽ¥å£å’Œ Java çš„ POJOs(Plain Old Java Objects,æ™®é€šçš„ Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚ äºŒã€ä¸ŽHibernateå¯¹æ¯” MyBatisä¸ŽHibernateéƒ½å±žäºŽORMæ¡†æž¶ï¼Œä¸ºæ•°æ®å±‚æä¾›æŒä¹…åŒ–æ“ä½œçš„æ”¯æŒã€‚ ç”±äºŽMyBatisç­‰æŽ¥è¿‘äºŽJDBCçš„å¼€å‘ï¼Œæ‰€ä»¥ç›¸å¯¹äºŽHibernateæ›´åŠ çš„ç®€å•æ˜“å­¦ã€‚ Hibernateå¼€å‘è€…ä¸è¦å…³æ³¨SQLçš„ç”Ÿæˆå’Œç»“æžœçš„æ˜ å°„ï¼Œè€ŒMybatiséœ€è¦æ‰‹åŠ¨é…ç½®å…³ç³»å’ŒSQLã€‚ Hibernateä¸Žå…·ä½“çš„æ•°æ®åº“å…³è”é…ç½®å¯¹åº”çš„XMLå³å¯ï¼Œæ‰€æ‰§è¡Œçš„HQLè¯­å¥ä¸Žæ•°æ®åº“æ— å…³ï¼Œç§»æ¤æ€§å¼ºã€‚è€ŒMybatisç›´æŽ¥ä½¿ç”¨çš„æ˜¯SQLè¯­å¥ï¼Œç›¸å¯¹æ²¡é‚£ä¹ˆçµæ´»ã€‚ Mybatisçš„çµæ´»æ€§ã€æ‰§è¡Œæ•ˆçŽ‡ç•¥é«˜äºŽHibernateã€‚ ä¸‰ã€Mybatisçš„ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š SQLå†™åœ¨XMLé‡Œï¼Œä»Žç¨‹åºä»£ç ä¸­å½»åº•åˆ†ç¦»ï¼Œé™ä½Žè€¦åˆåº¦ï¼Œä¾¿äºŽç»Ÿä¸€ç®¡ç†å’Œä¼˜ åŒ–ï¼Œå¹¶å¯é‡ç”¨ï¼Œé€‚åˆå¤šè¡¨çš„å¤æ‚æŸ¥è¯¢ æä¾›XMLæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€SQLè¯­å¥ã€‚ æä¾›æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡ä¸Žæ•°æ®åº“çš„ORMå­—æ®µå…³ç³»æ˜ å°„ã€‚ ç¼ºç‚¹ SQLè¯­å¥çš„ç¼–å†™å·¥ä½œé‡è¾ƒå¤§ï¼Œå°¤å…¶æ˜¯å­—æ®µå¤šã€å…³è”è¡¨å¤šæ—¶ï¼Œæ›´æ˜¯å¦‚æ­¤ï¼Œå¯¹å¼€å‘äººå‘˜ç¼–å†™SQLè¯­å¥çš„åŠŸåº•æœ‰ä¸€å®šè¦æ±‚ã€‚ SQLè¯­å¥ä¾èµ–äºŽæ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“ç§»æ¤æ€§å·®ï¼Œä¸èƒ½éšæ„æ›´æ¢æ•°æ®åº“ã€‚ å››ã€ä»£ç æ¡ˆä¾‹1ã€ç¼–å†™Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ã€ mybatis-core.xml ã€‘1234567891011121314151617&lt;typeAliases&gt; &lt;typeAlias type=&quot;com.fan.entity.StudentEntity&quot; alias=&quot;StudentEntity&quot;/&gt;&lt;/typeAliases&gt; &lt;environments default=&quot;development&quot;&gt; &lt;environment id=&quot;development&quot;&gt; &lt;transactionManager type=&quot;JDBC&quot;/&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://127.0.0.1:3306/public&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;mappers&gt; &lt;mapper resource=&quot;StudentMapper.xml&quot;/&gt; &lt;/mappers&gt; é‡Šæ„: typeAliasç”¨äºŽå­˜æ”¾å®žä½“ç±»åˆ«åçš„é›†åˆ â€” typeAliasä¸­çš„typeä»£è¡¨å®žä½“ç±» â€” aliasæˆ‘ä»¬è‡ªå·±è‡ªå®šä¹‰çš„åˆ«å environmentsçŽ¯å¢ƒ defaulté‡Œé¢çš„å€¼å¯ä»¥æ˜¯ç”Ÿäº§çŽ¯å¢ƒã€æµ‹è¯•çŽ¯å¢ƒã€å¼€å‘çŽ¯å¢ƒâ€¦ transactionManageräº‹åŠ¡ç®¡ç† typeé»˜è®¤ä¸ºJDBC dataSourceæ˜¯æ•°æ®åº“è¿žæŽ¥çš„åŸºæœ¬ä¿¡æ¯ mapperä¸­çš„resourceä»£è¡¨åº”ç”¨å®žä½“ç±»çš„Mapper 2ã€ç¼–å†™Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ã€ mybatis-core.xml ã€‘123456789101112131415161718192021&lt;mapper namespace=&quot;StuMapper&quot;&gt; &lt;select id=&quot;selCount&quot; resultType=&quot;int&quot;&gt; select count(*) from student &lt;/select&gt; &lt;select id=&quot;selById&quot; parameterType=&quot;int&quot; resultType=&quot;StudentEntity&quot;&gt; SELECT * FROM student WHERE student.stuId = #&#123;id&#125; &lt;/select&gt; &lt;insert id=&quot;addOne&quot; parameterType=&quot;StudentEntity&quot;&gt; INSERT INTO student VALUES(NULL,#&#123;stuName&#125;,#&#123;gender&#125;,#&#123;age&#125;,#&#123;address&#125;,NULL) &lt;/insert&gt; &lt;delete id=&quot;delOne&quot; parameterType=&quot;int&quot;&gt; DELETE FROM student WHERE student.stuId = #&#123;id&#125; &lt;/delete&gt; &lt;update id=&quot;modifyOne&quot; parameterType=&quot;StudentEntity&quot;&gt; UPDATE student SET stuName = #&#123;stuName&#125; WHERE stuId = #&#123;stuId&#125; &lt;/update&gt;&lt;/mapper&gt; é‡Šæ„: mapperä¸­çš„namespaceæ˜¯ç‹¬ç«‹å”¯ä¸€çš„ DMLè¯­å¥ä¸­æ”¯æŒå†™åŽŸç”Ÿçš„SQLè¯­å¥ idå¯ä»¥å½¢è±¡çš„ç†è§£ä¸ºæ–¹æ³•åï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿæ˜¯ç‹¬ç«‹å”¯ä¸€çš„ parameterTypeä»£è¡¨ä¼ è¿‡æ¥çš„å‚æ•°ç±»åž‹ resultTypeä»£è¡¨è¿”å›žå€¼ #{xxx} å¯ä»¥ç†è§£ä¸ºå ä½ç¬¦ 3ã€ç®€å•çš„ä½¿ç”¨123456789101112131415161718192021222324252627282930313233public class Main &#123; public static void main(String[] args) &#123; Reader reader = null; SqlSessionFactoryBuilder builder = null; SqlSessionFactory factory = null; SqlSession session = null; try &#123; //1.åŠ è½½é…ç½®æ–‡ä»¶ reader = Resources.getResourceAsReader(&quot;mybatis-core.xml&quot;); //2.å¾—åˆ°å·¥åŽ‚çš„åˆ›å»ºå¯¹è±¡ builder = new SqlSessionFactoryBuilder(); //3.å¾—åˆ°å·¥åŽ‚å¯¹è±¡ factory = builder.build(reader); //4.å¾—åˆ°session session = factory.openSession(); //5.æ‰§è¡Œè¯­å¥ StudentEntity student = session.selectOne(&quot;StuMapper.selById&quot;, 100); //StuMapper--&gt; StudentMapper.xmlä¸­çš„namespaceã€‚ selById--&gt; ä¸ºå…¶ä¸­çš„id ã€‚ 100--&gt; å®žå‚ System.out.println(&quot;å­¦ç”Ÿåä¸º--&gt;&quot; + student.getStuName()); session.commit(); //ä¿®æ”¹ã€æ–°å¢žè¯­å¥è®°å¾—æäº¤äº‹åŠ¡ &#125; catch (Exception e) &#123; session.rollback(); e.printStackTrace(); &#125; finally &#123; if (session != null) &#123; session.close(); &#125; &#125; &#125;&#125; ENDðŸ™ˆ]]></content>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>mybatis</tag>
      </tags>
  </entry>
</search>
